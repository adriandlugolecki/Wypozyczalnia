import{_ as z,D as V,E as B,c as y,r as c,G as I,o as S,b as j,H as C,q as v,e as n,f as L,g as D,h as a,w as H,i as t,u as w,B as N,C as R,k}from"./index-dcca130b.js";const q=r=>(V("data-v-b37f2cc4"),r=r(),B(),r),E={class:"tlo"},M={class:"okno"},U=q(()=>y("h1",null,"Zaloguj się",-1)),G={__name:"BrakDostepu",setup(r){const u=c(!1),i=c(),d=c(),b=I();let _=null;const m=c();S(()=>{_=b.query.redirect});const g=async f=>{var s;await f;const e=await((s=m.value)==null?void 0:s.validate());if(e&&e.valid)try{var o=await j.post("/autoryzacja/logowanie",{email:i.value,password:d.value});localStorage.setItem("token",o.data.token),localStorage.setItem("uprawnienia",o.data.role),C.uprawnienia=o.data.role,_?v.push(`${_}`):v.push("/")}catch{}};return(f,e)=>{const o=n("v-row"),s=n("v-text-field"),p=n("v-btn"),x=n("RouterLink"),h=n("v-form");return L(),D("div",E,[y("div",M,[a(h,{ref_key:"formularzLogowania",ref:m,onSubmit:H(g,["prevent"])},{default:t(()=>[a(o,{class:"justify-center my-6"},{default:t(()=>[U]),_:1}),a(s,{label:"login",modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=l=>i.value=l),rules:w(N)},null,8,["modelValue","rules"]),a(s,{label:"hasło",modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=l=>d.value=l),rules:w(R),type:u.value?"text":"password","append-inner-icon":u.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[2]||(e[2]=()=>u.value=!u.value)},null,8,["modelValue","rules","type","append-inner-icon"]),a(o,{class:"justify-center mt-5"},{default:t(()=>[a(p,{type:"submit",color:"#ebcc39"},{default:t(()=>[k(" zaloguj ")]),_:1})]),_:1}),a(o,{class:"justify-center mt-5",s:""},{default:t(()=>[a(x,{to:"zmianaHasla",custom:""},{default:t(({navigate:l})=>[a(p,{size:"x-small",variant:"plain",onClick:l},{default:t(()=>[k(" zapomnałem hasła ")]),_:2},1032,["onClick"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])])}}},T=z(G,[["__scopeId","data-v-b37f2cc4"]]);export{T as default};
