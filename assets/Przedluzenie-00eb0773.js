import{_ as N,D as S,E as B,c as o,r as c,o as I,I as f,d as z,e as T,f as _,g as w,F as V,h as m,j as K,u as x,v as O,k as t,t as s,i as h,m as D,J}from"./index-dcca130b.js";const a=i=>(S("data-v-dce710d8"),i=i(),B(),i),W={key:0},A=a(()=>o("span",{style:{color:"brown"}},"!! Możliwe przedłużenie wypożyczenia !! ➜ ",-1)),E={key:0},F=a(()=>o("div",null,"Kiedy chcesz oddać?",-1)),Z=["min","max"],U={key:1},q=a(()=>o("div",null,"Wypożyczenie zostało wstępnie wydłużone",-1)),G=a(()=>o("br",null,null,-1)),H=a(()=>o("br",null,null,-1)),L=a(()=>o("br",null,null,-1)),Q=a(()=>o("br",null,null,-1)),R=a(()=>o("br",null,null,-1)),X=a(()=>o("div",null,"Data zwrotu zmieni się po zaakceptowaniu przez pracownika",-1)),Y={__name:"Przedluzenie",props:{wypozyczenia:Object},setup(i){const n=i,j=n.wypozyczenia.dataZakonczenia,p=new Date(j);p.setDate(p.getDate());const b=n.wypozyczenia.kwota/n.wypozyczenia.ileDni,r=c(),y=c(!1),d=c(),k=c(!1),g=c();I(async()=>{try{var l=await f.get(`/Klient/DostepnePrzedluzenia/${n.wypozyczenia.id}`);l.data=="brak terminu"?r.value="brak terminu":r.value=new Date(l.data)}catch(e){console.error("Błąd",e)}});const P=()=>(console.log(d.value),console.log(r.value),Math.round((Date.parse(d.value)-p)/864e5)),$=async()=>{try{var l=await f.delete(`/Klient/AnulujPrzedluzenie/${g.value.id}`);z.tekst=l.data,z.show=!0,location.reload()}catch(e){z.tekst=e.response.data,z.error=!0,z.show=!0}},C=async()=>{var l=await f.post(`/Klient/PrzedluzWypozyczenie/${n.wypozyczenia.id}/${d.value}`);g.value=l.data,y.value=!1},M=()=>{location.reload()};return(l,e)=>{const v=T("v-btn");return _(),w(V,null,[r.value!="brak terminu"&&k.value==!1?(_(),w("div",W,[A,m(v,{icon:"mdi-calendar-month",color:"grey",onClick:e[0]||(e[0]=u=>y.value=!y.value)}),y.value?(_(),w("div",E,[F,K(o("input",{class:"wybor",type:"date","onUpdate:modelValue":e[1]||(e[1]=u=>d.value=u),min:new Date(x(p).getTime()+1728e5).toJSON().slice(0,10),max:new Date(r.value.getTime()+864e5).toJSON().slice(0,10)},null,8,Z),[[O,d.value]]),t(" kwota: "+s(P()*b)+" zł ",1),o("div",null,[m(v,{color:"grey",onClick:e[2]||(e[2]=u=>k.value=C())},{default:h(()=>[t("Przedluż")]),_:1})])])):D("",!0)])):D("",!0),k.value?(_(),w("div",U,[q,t(" Wykonaj przelew na konto "),G,t(" 53 1240 3767 3168 3276 4028 0639 "),H,t("lub na numer telefonu "),L,t(s(x(J)),1),Q,t(" o tytule przelewu: "+s(n.wypozyczenia.id)+"|"+s(n.wypozyczenia.samochod.marka)+s(n.wypozyczenia.samochod.model)+" ",1),R,t(" kwota "+s(b)+" zł "),X,o("div",null,[m(v,{color:"red",onClick:e[3]||(e[3]=u=>$())},{default:h(()=>[t("Anuluj")]),_:1}),m(v,{color:"green",onClick:e[4]||(e[4]=u=>M())},{default:h(()=>[t("Opłacone")]),_:1})])])):D("",!0)],64)}}},oe=N(Y,[["__scopeId","data-v-dce710d8"]]);export{oe as default};
