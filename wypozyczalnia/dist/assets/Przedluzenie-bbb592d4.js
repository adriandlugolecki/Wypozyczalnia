import{r as u,o as M,B as f,b as N,c as _,d as w,e as m,k as S,l as T,h as o,u as x,j as t,t as s,w as h,g as b,F as V,p as z,C as I,x as K,y as O}from"./index-9a356706.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";const a=i=>(K("data-v-dce710d8"),i=i(),O(),i),A={key:0},F=a(()=>o("span",{style:{color:"brown"}},"!! Możliwe przedłużenie wypożyczenia !! ➜ ",-1)),J={key:0},Z=a(()=>o("div",null,"Kiedy chcesz oddać?",-1)),E=["min","max"],U={key:1},q=a(()=>o("div",null,"Wypożyczenie zostało wstępnie wydłużone",-1)),G=a(()=>o("br",null,null,-1)),H=a(()=>o("br",null,null,-1)),L=a(()=>o("br",null,null,-1)),Q=a(()=>o("br",null,null,-1)),R=a(()=>o("br",null,null,-1)),X=a(()=>o("div",null,"Data zwrotu zmieni się po zaakceptowaniu przez pracownika",-1)),Y={__name:"Przedluzenie",props:{wypozyczenia:Object},setup(i){const n=i,j=n.wypozyczenia.dataZakonczenia,p=new Date(j);p.setDate(p.getDate());const D=n.wypozyczenia.kwota/n.wypozyczenia.ileDni,r=u(),y=u(!1),d=u(),k=u(!1),g=u();M(async()=>{try{var l=await f.get(`/Klient/DostepnePrzedluzenia/${n.wypozyczenia.id}`);l.data=="brak terminu"?r.value="brak terminu":r.value=new Date(l.data)}catch(e){console.error("Błąd",e)}});const C=()=>(console.log(d.value),console.log(r.value),Math.round((Date.parse(d.value)-p)/864e5)),P=async()=>{try{var l=await f.delete(`/Klient/AnulujPrzedluzenie/${g.value.id}`);z.tekst=l.data,z.show=!0,location.reload()}catch(e){z.tekst=e.response.data,z.error=!0,z.show=!0}},$=async()=>{var l=await f.post(`/Klient/PrzedluzWypozyczenie/${n.wypozyczenia.id}/${d.value}`);g.value=l.data,y.value=!1},B=()=>{location.reload()};return(l,e)=>{const v=N("v-btn");return _(),w(V,null,[r.value!="brak terminu"&&k.value==!1?(_(),w("div",A,[F,m(v,{icon:"mdi-calendar-month",color:"grey",onClick:e[0]||(e[0]=c=>y.value=!y.value)}),y.value?(_(),w("div",J,[Z,S(o("input",{class:"wybor",type:"date","onUpdate:modelValue":e[1]||(e[1]=c=>d.value=c),min:new Date(x(p).getTime()+1728e5).toJSON().slice(0,10),max:new Date(r.value.getTime()+864e5).toJSON().slice(0,10)},null,8,E),[[T,d.value]]),t(" kwota: "+s(C()*D)+" zł ",1),o("div",null,[m(v,{color:"grey",onClick:e[2]||(e[2]=c=>k.value=$())},{default:h(()=>[t("Przedluż")]),_:1})])])):b("",!0)])):b("",!0),k.value?(_(),w("div",U,[q,t(" Wykonaj przelew na konto "),G,t(" 53 1240 3767 3168 3276 4028 0639 "),H,t("lub na numer telefonu "),L,t(s(x(I)),1),Q,t(" o tytule przelewu: "+s(n.wypozyczenia.id)+"|"+s(n.wypozyczenia.samochod.marka)+s(n.wypozyczenia.samochod.model)+" ",1),R,t(" kwota "+s(D)+" zł "),X,o("div",null,[m(v,{color:"red",onClick:e[3]||(e[3]=c=>P())},{default:h(()=>[t("Anuluj")]),_:1}),m(v,{color:"green",onClick:e[4]||(e[4]=c=>B())},{default:h(()=>[t("Opłacone")]),_:1})])])):b("",!0)],64)}}},te=W(Y,[["__scopeId","data-v-dce710d8"]]);export{te as default};
