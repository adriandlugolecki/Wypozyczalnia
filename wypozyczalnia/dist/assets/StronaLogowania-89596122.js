import{r as c,b as n,c as x,d as S,h as k,e,w as t,f as z,u as w,j as g,a as I,q as V,s as m,p as _,x as j,y as L}from"./index-9a356706.js";import{z as C,a as B}from"./zasady-17a3576a.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";const N=r=>(j("data-v-e0fdb2fa"),r=r(),L(),r),E={class:"tlo"},R={class:"okno"},U=N(()=>k("h1",{class:"gold"},"Zaloguj się",-1)),q={__name:"StronaLogowania",setup(r){const i=c(!1),d=c(),p=c(),f=c(),y=async v=>{var s;await v;const a=await((s=f.value)==null?void 0:s.validate());if(a&&a.valid)try{var o=await I.post("/autoryzacja/logowanie",{email:d.value,password:p.value});localStorage.setItem("token",o.data.token),localStorage.setItem("uprawnienia",o.data.role),V.uprawnienia=o.data.role,localStorage.getItem("uprawnienia")=="pracownik"?m.push("/pracownik"):localStorage.getItem("uprawnienia")=="admin"?m.push("/pracownik"):m.push("/")}catch(u){_.error=!0,_.tekst="Email lub hasło jest źle wpisane",_.show=!0,console.log(u)}};return(v,a)=>{const o=n("v-row"),s=n("v-text-field"),u=n("v-btn"),b=n("RouterLink"),h=n("v-form");return x(),S("div",E,[k("div",R,[e(h,{ref_key:"formularzLogowania",ref:f,onSubmit:z(y,["prevent"])},{default:t(()=>[e(o,{class:"justify-center my-6"},{default:t(()=>[U]),_:1}),e(s,{label:"email",modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=l=>d.value=l),rules:w(C)},null,8,["modelValue","rules"]),e(s,{label:"hasło",modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=l=>p.value=l),rules:w(B),type:i.value?"text":"password","append-inner-icon":i.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":a[2]||(a[2]=()=>i.value=!i.value)},null,8,["modelValue","rules","type","append-inner-icon"]),e(o,{class:"justify-center mt-5"},{default:t(()=>[e(u,{type:"submit",color:"#ebcc39"},{default:t(()=>[g(" zaloguj ")]),_:1})]),_:1}),e(o,{class:"justify-center"},{default:t(()=>[e(b,{to:"zmianaHasla",custom:""},{default:t(({navigate:l})=>[e(u,{size:"x-small",variant:"plain",onClick:l},{default:t(()=>[g(" zapomnałem hasła ")]),_:2},1032,["onClick"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])])}}},A=H(q,[["__scopeId","data-v-e0fdb2fa"]]);export{A as default};
