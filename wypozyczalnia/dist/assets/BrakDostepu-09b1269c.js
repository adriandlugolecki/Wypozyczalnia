import{r as c,A as z,o as V,b as n,c as j,d as B,h as k,e as a,w as t,f as I,u as v,j as w,a as S,q as C,s as y,x as L,y as D}from"./index-858ad3b9.js";import{z as H,a as N}from"./zasady-17a3576a.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";const q=r=>(L("data-v-b37f2cc4"),r=r(),D(),r),M={class:"tlo"},U={class:"okno"},A=q(()=>k("h1",null,"Zaloguj się",-1)),E={__name:"BrakDostepu",setup(r){const u=c(!1),i=c(),d=c(),b=z();let p=null;const m=c();V(()=>{p=b.query.redirect});const x=async f=>{var s;await f;const e=await((s=m.value)==null?void 0:s.validate());if(e&&e.valid)try{var o=await S.post("/autoryzacja/logowanie",{email:i.value,password:d.value});localStorage.setItem("token",o.data.token),localStorage.setItem("uprawnienia",o.data.role),C.uprawnienia=o.data.role,p?y.push(`${p}`):y.push("/")}catch{}};return(f,e)=>{const o=n("v-row"),s=n("v-text-field"),_=n("v-btn"),g=n("RouterLink"),h=n("v-form");return j(),B("div",M,[k("div",U,[a(h,{ref_key:"formularzLogowania",ref:m,onSubmit:I(x,["prevent"])},{default:t(()=>[a(o,{class:"justify-center my-6"},{default:t(()=>[A]),_:1}),a(s,{label:"login",modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=l=>i.value=l),rules:v(H)},null,8,["modelValue","rules"]),a(s,{label:"hasło",modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=l=>d.value=l),rules:v(N),type:u.value?"text":"password","append-inner-icon":u.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[2]||(e[2]=()=>u.value=!u.value)},null,8,["modelValue","rules","type","append-inner-icon"]),a(o,{class:"justify-center mt-5"},{default:t(()=>[a(_,{type:"submit",color:"#ebcc39"},{default:t(()=>[w(" zaloguj ")]),_:1})]),_:1}),a(o,{class:"justify-center mt-5",s:""},{default:t(()=>[a(g,{to:"zmianaHasla",custom:""},{default:t(({navigate:l})=>[a(_,{size:"x-small",variant:"plain",onClick:l},{default:t(()=>[w(" zapomnałem hasła ")]),_:2},1032,["onClick"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])])}}},$=R(E,[["__scopeId","data-v-b37f2cc4"]]);export{$ as default};
