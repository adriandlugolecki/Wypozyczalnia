import{q as x,s as S,c as k,r as c,b as z,x as I,y as m,d as _,e as n,f as V,g as L,h as a,w as j,i as t,u as w,k as g}from"./index-d81d64f3.js";import{z as C,a as B}from"./zasady-17a3576a.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";const N=r=>(x("data-v-e0fdb2fa"),r=r(),S(),r),E={class:"tlo"},R={class:"okno"},U=N(()=>k("h1",{class:"gold"},"Zaloguj się",-1)),q={__name:"StronaLogowania",setup(r){const i=c(!1),d=c(),p=c(),f=c(),y=async v=>{var s;await v;const e=await((s=f.value)==null?void 0:s.validate());if(e&&e.valid)try{var o=await z.post("/autoryzacja/logowanie",{email:d.value,password:p.value});localStorage.setItem("token",o.data.token),localStorage.setItem("uprawnienia",o.data.role),I.uprawnienia=o.data.role,localStorage.getItem("uprawnienia")=="pracownik"?m.push("/pracownik"):localStorage.getItem("uprawnienia")=="admin"?m.push("/pracownik"):m.push("/")}catch(u){_.error=!0,_.tekst="Email lub hasło jest źle wpisane",_.show=!0,console.log(u)}};return(v,e)=>{const o=n("v-row"),s=n("v-text-field"),u=n("v-btn"),b=n("RouterLink"),h=n("v-form");return V(),L("div",E,[k("div",R,[a(h,{ref_key:"formularzLogowania",ref:f,onSubmit:j(y,["prevent"])},{default:t(()=>[a(o,{class:"justify-center my-6"},{default:t(()=>[U]),_:1}),a(s,{label:"email",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=l=>d.value=l),rules:w(C)},null,8,["modelValue","rules"]),a(s,{label:"hasło",modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=l=>p.value=l),rules:w(B),type:i.value?"text":"password","append-inner-icon":i.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[2]||(e[2]=()=>i.value=!i.value)},null,8,["modelValue","rules","type","append-inner-icon"]),a(o,{class:"justify-center mt-5"},{default:t(()=>[a(u,{type:"submit",color:"#ebcc39"},{default:t(()=>[g(" zaloguj ")]),_:1})]),_:1}),a(o,{class:"justify-center"},{default:t(()=>[a(b,{to:"zmianaHasla",custom:""},{default:t(({navigate:l})=>[a(u,{size:"x-small",variant:"plain",onClick:l},{default:t(()=>[g(" zapomnałem hasła ")]),_:2},1032,["onClick"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])])}}},A=H(q,[["__scopeId","data-v-e0fdb2fa"]]);export{A as default};
