import{q as z,s as V,c as k,r as c,A as B,o as I,b as S,x as j,y as v,e as n,f as C,g as L,h as a,w as D,i as t,u as w,k as y}from"./index-e4054cf7.js";import{z as H,a as N}from"./zasady-17a3576a.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";const q=r=>(z("data-v-b37f2cc4"),r=r(),V(),r),M={class:"tlo"},U={class:"okno"},A=q(()=>k("h1",null,"Zaloguj się",-1)),E={__name:"BrakDostepu",setup(r){const u=c(!1),i=c(),d=c(),b=B();let p=null;const m=c();I(()=>{p=b.query.redirect});const x=async f=>{var s;await f;const e=await((s=m.value)==null?void 0:s.validate());if(e&&e.valid)try{var o=await S.post("/autoryzacja/logowanie",{email:i.value,password:d.value});localStorage.setItem("token",o.data.token),localStorage.setItem("uprawnienia",o.data.role),j.uprawnienia=o.data.role,p?v.push(`${p}`):v.push("/")}catch{}};return(f,e)=>{const o=n("v-row"),s=n("v-text-field"),_=n("v-btn"),g=n("RouterLink"),h=n("v-form");return C(),L("div",M,[k("div",U,[a(h,{ref_key:"formularzLogowania",ref:m,onSubmit:D(x,["prevent"])},{default:t(()=>[a(o,{class:"justify-center my-6"},{default:t(()=>[A]),_:1}),a(s,{label:"login",modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=l=>i.value=l),rules:w(H)},null,8,["modelValue","rules"]),a(s,{label:"hasło",modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=l=>d.value=l),rules:w(N),type:u.value?"text":"password","append-inner-icon":u.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[2]||(e[2]=()=>u.value=!u.value)},null,8,["modelValue","rules","type","append-inner-icon"]),a(o,{class:"justify-center mt-5"},{default:t(()=>[a(_,{type:"submit",color:"#ebcc39"},{default:t(()=>[y(" zaloguj ")]),_:1})]),_:1}),a(o,{class:"justify-center mt-5",s:""},{default:t(()=>[a(g,{to:"zmianaHasla",custom:""},{default:t(({navigate:l})=>[a(_,{size:"x-small",variant:"plain",onClick:l},{default:t(()=>[y(" zapomnałem hasła ")]),_:2},1032,["onClick"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])])}}},$=R(E,[["__scopeId","data-v-b37f2cc4"]]);export{$ as default};
